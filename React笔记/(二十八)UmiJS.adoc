
# UmiJS:


image::https://github.com/god1097/picture/blob/main/umi/Icon.png[Icon]


=== https://umijs.org/zh-CN/docs[UmiJSå®˜ç½‘]
=== https://github.com/umijs/umi[UmiJSä»“åº“]

=== UmiJSç®€ä»‹

> - Umiï¼Œä¸­æ–‡å¯å‘éŸ³ä¸ºä¹Œç±³ï¼Œæ˜¯å¯æ‰©å±•çš„ä¼ä¸šçº§å‰ç«¯åº”ç”¨æ¡†æ¶ã€‚
> - Umi ä»¥è·¯ç”±ä¸ºåŸºç¡€çš„ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼Œä¿è¯è·¯ç”±çš„åŠŸèƒ½å®Œå¤‡ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚
> - ç„¶åé…ä»¥ç”Ÿå‘½å‘¨æœŸå®Œå–„çš„æ’ä»¶ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ã€‚
> - Umi æ˜¯èš‚èšé‡‘æœçš„åº•å±‚å‰ç«¯æ¡†æ¶ï¼Œå·²ç›´æ¥æˆ–é—´æ¥åœ°æœåŠ¡äº† 3000+ åº”ç”¨ï¼ŒåŒ…æ‹¬ javaã€nodeã€H5 æ— çº¿ã€ç¦»çº¿ï¼ˆHybridï¼‰åº”ç”¨ã€çº¯å‰ç«¯ assets åº”ç”¨ã€CMS åº”ç”¨ç­‰ã€‚

=== UmiJS 6å¤§ç‰¹æ€§ï¼š

> - ğŸ‰ å¯æ‰©å±•ï¼ŒUmi å®ç°äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä½¿å…¶æ’ä»¶åŒ–ï¼ŒUmi å†…éƒ¨åŠŸèƒ½ä¹Ÿå…¨ç”±æ’ä»¶å®Œæˆã€‚æ­¤å¤–è¿˜æ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥æ»¡è¶³åŠŸèƒ½å’Œå‚ç›´åŸŸçš„åˆ†å±‚éœ€æ±‚ã€‚
> - ğŸ“¦ å¼€ç®±å³ç”¨ï¼ŒUmi å†…ç½®äº†è·¯ç”±ã€æ„å»ºã€éƒ¨ç½²ã€æµ‹è¯•ç­‰ï¼Œä»…éœ€ä¸€ä¸ªä¾èµ–å³å¯ä¸Šæ‰‹å¼€å‘ã€‚å¹¶ä¸”è¿˜æä¾›é’ˆå¯¹ React çš„é›†æˆæ’ä»¶é›†ï¼Œå†…æ¶µä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¯æ»¡è¶³æ—¥å¸¸ 80% çš„å¼€å‘éœ€æ±‚ã€‚
> - ğŸ  ä¼ä¸šçº§ï¼Œç»èš‚èšå†…éƒ¨ 3000+ é¡¹ç›®ä»¥åŠé˜¿é‡Œã€ä¼˜é…·ã€ç½‘æ˜“ã€é£çŒªã€å£ç¢‘ç­‰å…¬å¸é¡¹ç›®çš„éªŒè¯ï¼Œå€¼å¾—ä¿¡èµ–ã€‚
> - ğŸš€ å¤§é‡è‡ªç ”ï¼ŒåŒ…å«å¾®å‰ç«¯ã€ç»„ä»¶æ‰“åŒ…ã€æ–‡æ¡£å·¥å…·ã€è¯·æ±‚åº“ã€hooks åº“ã€æ•°æ®æµç­‰ï¼Œæ»¡è¶³æ—¥å¸¸é¡¹ç›®çš„å‘¨è¾¹éœ€æ±‚ã€‚
> - ğŸŒ´ å®Œå¤‡è·¯ç”±ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼ŒåŒæ—¶ä¿æŒåŠŸèƒ½çš„å®Œå¤‡æ€§ï¼Œæ¯”å¦‚åŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€æƒé™è·¯ç”±ç­‰ç­‰ã€‚
> - ğŸš„ é¢å‘æœªæ¥ï¼Œåœ¨æ»¡è¶³éœ€æ±‚çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šåœæ­¢å¯¹æ–°æŠ€æœ¯çš„æ¢ç´¢ã€‚æ¯”å¦‚ dll æé€Ÿã€modern modeã€webpack@5ã€è‡ªåŠ¨åŒ– externalã€bundler less ç­‰ç­‰

=== ä»€ä¹ˆæ—¶å€™ä¸ç”¨ Umiï¼Ÿ

> - éœ€è¦æ”¯æŒ IE 8 æˆ–æ›´ä½ç‰ˆæœ¬çš„æµè§ˆå™¨
> - éœ€è¦æ”¯æŒ React 16.8.0 ä»¥ä¸‹çš„ React
> - éœ€è¦è·‘åœ¨ Node 10 ä»¥ä¸‹çš„ç¯å¢ƒä¸­
> - æœ‰å¾ˆå¼ºçš„ webpack è‡ªå®šä¹‰éœ€æ±‚å’Œä¸»è§‚æ„æ„¿
> - éœ€è¦é€‰æ‹©ä¸åŒçš„è·¯ç”±æ–¹æ¡ˆ

==== Umi å¯èƒ½ä¸é€‚åˆä½ 

=== ä¸ºä»€ä¹ˆä¸æ˜¯ï¼Ÿ

==== create-react-app

> - create-react-app æ˜¯åŸºäº webpack çš„æ‰“åŒ…å±‚æ–¹æ¡ˆï¼ŒåŒ…å« buildã€devã€lint ç­‰ï¼Œä»–åœ¨æ‰“åŒ…å±‚æŠŠä½“éªŒåšåˆ°äº†æè‡´ï¼Œä½†æ˜¯ä¸åŒ…å«è·¯ç”±ï¼Œä¸æ˜¯æ¡†æ¶ï¼Œä¹Ÿä¸æ”¯æŒé…ç½®ã€‚
> - æ‰€ä»¥ï¼Œå¦‚æœå¤§å®¶æƒ³åŸºäºä»–ä¿®æ”¹éƒ¨åˆ†é…ç½®ï¼Œæˆ–è€…å¸Œæœ›åœ¨æ‰“åŒ…å±‚ä¹‹å¤–ä¹ŸåšæŠ€æœ¯æ”¶æ•›æ—¶ï¼Œå°±ä¼šé‡åˆ°å›°éš¾ã€‚

==== next.js

> - next.js æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼ŒUmi å¾ˆå¤šåŠŸèƒ½æ˜¯å‚è€ƒ next.js åšçš„ã€‚è¦è¯´æœ‰å“ªäº›åœ°æ–¹ä¸å¦‚ Umiï¼Œæˆ‘è§‰å¾—å¯èƒ½æ˜¯ä¸å¤Ÿè´´è¿‘ä¸šåŠ¡ï¼Œä¸å¤Ÿæ¥åœ°æ°”ã€‚
> - æ¯”å¦‚ antdã€dvaï¼ˆé˜¿é‡Œè‡ªç ”æ•°æ®æµæ–¹æ¡ˆï¼‰çš„æ·±åº¦æ•´åˆï¼Œæ¯”å¦‚å›½é™…åŒ–ã€æƒé™ã€æ•°æ®æµã€é…ç½®å¼è·¯ç”±ã€è¡¥ä¸æ–¹æ¡ˆã€è‡ªåŠ¨åŒ– external æ–¹é¢ç­‰ç­‰ä¸€çº¿å¼€å‘è€…æ‰ä¼šé‡åˆ°çš„é—®é¢˜ã€‚


=== çº¦å®šåŒ–æ€æƒ³

> - åœ¨ä½¿ç”¨umiæ¡†æ¶çš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“å°±å‘ç°å®ƒå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯çº¦å®šå¼çš„ã€‚
> - æ‰€è°“çº¦å®šå¼å°±æ˜¯æŒ‡ï¼ŒæŒ‰ç…§çº¦å®šå¥½çš„æ–¹å¼å¼€å‘ï¼Œå°±èƒ½è¾¾åˆ°æŸç§æ•ˆæœï¼Œä¸­é—´çš„è¿‡ç¨‹ç”±æ¡†æ¶å¸®æˆ‘ä»¬å®Œæˆï¼Œç‰¹åˆ«é€‚åˆæ‡’æ‡’çš„å¼€å‘ã€‚
> * å»ºä¸€ä¸ª locales ç›®å½•ï¼Œå°±æ‹¥æœ‰äº†å›½é™…åŒ–
> * å»ºä¸€ä¸ª models ç›®å½•ï¼Œå°±æ‹¥æœ‰äº†æ•°æ®æµ
> * å»ºä¸€ä¸ª mock ç›®å½•ï¼Œå°±æ‹¥æœ‰äº†æ•°æ® mock
> * å»ºä¸€ä¸ª access.ts æ–‡ä»¶ï¼Œå°±æ‹¥æœ‰äº†æƒé™ç­–ç•¥ 
> - è¿™ç§æ–¹å¼å¯¹äºå›¢é˜Ÿä»£ç é£æ ¼çš„ç»Ÿä¸€æ˜¯éå¸¸æœ‰å¥½å¤„çš„ï¼Œç›´æ¥åœ¨æ¡†æ¶å±‚é¢å°±çº¦æŸäº†å¤§å®¶çš„ç›®å½•ç»„ç»‡æ¨¡å¼ï¼Œä¾¿äºå›¢é˜Ÿç»´æŠ¤

=== UmiJS èƒŒåçš„æ€è€ƒå’Œæ¦‚å¿µ

=== æŠ€æœ¯æ”¶æ•›

image::https://github.com/god1097/picture/blob/main/umi/%E6%B5%81%E7%A8%8B%E5%9B%BE.png[æŠ€æœ¯æ”¶æ•›]

> - è¿™å¼ å›¾æ˜¯ç»™å†…éƒ¨æ¡†æ¶ Bigfish ç”»çš„ï¼Œå¥—åˆ° Umi ä¸ŠåŒæ ·åˆé€‚ã€‚ä»–æŠŠå¤§å®¶å¸¸ç”¨çš„æŠ€æœ¯æ ˆè¿›è¡Œæ•´ç†ï¼Œæ”¶æ•›åˆ°ä¸€èµ·ï¼Œè®©å¤§å®¶åªç”¨ Umi å°±å¯ä»¥å®Œæˆ 80% çš„æ—¥å¸¸å·¥ä½œã€‚

=== æ’ä»¶ä½“ç³»

image::https://github.com/god1097/picture/blob/main/umi/%E6%B5%81%E7%A8%8B%E5%9B%BE2.png[æ’ä»¶ä½“ç³»]

> - å¯ä»¥è¯´æ’ä»¶ä½“ç³»æ˜¯ Umi æœ€é‡è¦çš„åŸºå»ºï¼Œå› ä¸ºåŒ…æ‹¬ Umiå†…éƒ¨å®ç°ä¹Ÿæ˜¯å…¨éƒ¨ç”±æ’ä»¶æ„æˆ


=== 3.xç‰ˆæœ¬çš„å˜åŒ–

> - å½»åº•é‡å†™çš„ä»£ç å’Œæ–‡æ¡£ï¼Œ80%+ çš„è¦†ç›–ç‡ï¼Œ~100M çš„å°ºå¯¸
> - å®˜æ–¹æ’ä»¶ã€æ’ä»¶é›†å’Œæœ€ä½³å®è·µ
> - æ›´æ™ºèƒ½ï¼ˆCSS Modules çš„è‡ªåŠ¨è¯†åˆ«ã€çº¦å®šå¼è·¯ç”±çš„æ”¹è¿›ç­‰ï¼‰
> - Import â€œæ‰€æœ‰â€ from Umiã€‚é€šè¿‡æ’ä»¶æ‰©å±• import from umi çš„èƒ½åŠ›
> - node_modules èµ° babel ç¼–è¯‘ ...

---


=== å¿«é€Ÿä¸Šæ‰‹

> - (1)å®‰è£…è„šæ‰‹æ¶

```jsx
  mkdir react-umi && cd react-umi //ç©ºç›®å½• 
  npx @umijs/create-umi-app
```

> - (2)å®‰è£…ä¾èµ–

```jsx
  npm i
```


> - (3)è¿è¡Œ


```jsx
  npm start
```

image::https://github.com/god1097/picture/blob/main/umi/umi%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C.png[è¿è¡Œ]

---


=== é¡¹ç›®ç›®å½•

> - é¡¹ç›®åˆå§‹åŒ–åï¼Œé»˜è®¤çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

----
  .
  â”œâ”€â”€ package.json
  â”œâ”€â”€ .umirc.ts é…ç½®æ–‡ä»¶ï¼ŒåŒ…å« umi å†…ç½®åŠŸèƒ½å’Œæ’ä»¶çš„é…ç½®ã€‚
  â”œâ”€â”€ .env ç¯å¢ƒå˜é‡
  â”œâ”€â”€ dist æ‰§è¡Œ umi build åï¼Œäº§ç‰©é»˜è®¤ä¼šå­˜æ”¾åœ¨è¿™é‡Œ
  â”œâ”€â”€ mock å­˜å‚¨ mock æ–‡ä»¶ï¼Œæ­¤ç›®å½•ä¸‹æ‰€æœ‰ js å’Œ ts æ–‡ä»¶ä¼šè¢«è§£æä¸º mock æ–‡ä»¶
  â”œâ”€â”€ public æ­¤ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä¼šè¢« copy åˆ°è¾“å‡ºè·¯å¾„
  â””â”€â”€ src
      â”œâ”€â”€ .umi ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼Œæ¯”å¦‚å…¥å£æ–‡ä»¶ã€è·¯ç”±ç­‰ï¼Œéƒ½ä¼šè¢«ä¸´æ—¶ç”Ÿæˆåˆ°è¿™é‡Œ
      â”œâ”€â”€ layouts/index.tsx çº¦å®šå¼è·¯ç”±æ—¶çš„å…¨å±€å¸ƒå±€æ–‡ä»¶
      â”œâ”€â”€ pages æ‰€æœ‰è·¯ç”±ç»„ä»¶å­˜æ”¾åœ¨è¿™é‡Œ
          â”œâ”€â”€ index.less
          â””â”€â”€ index.tsx
      â””â”€â”€ app.ts è¿è¡Œæ—¶é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰©å±•è¿è¡Œæ—¶çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ä¿®æ”¹è·¯ç”±ã€ä¿®æ”¹ render æ–¹æ³•ç­‰
----


> - æœ€é‡è¦çš„æ–‡ä»¶æ˜¯.umirc.tsé…ç½®æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å¯ä»¥é…ç½®å„ç§åŠŸèƒ½å’Œæ’ä»¶ï¼Œumiæ”¯æŒä¸åŒç¯å¢ƒè¯»å–ä¸åŒçš„é…ç½®æ–‡ä»¶


---

---

=== æ¡ˆä¾‹(å–åº§)

image::https://github.com/god1097/picture/blob/main/umi/%E6%A1%88%E4%BE%8B.gif[æ¡ˆä¾‹,280,500,align=center]


=== çº¦å®šå¼è·¯ç”±

> - çº¦å®šå¼è·¯ç”±ä¹Ÿå«æ–‡ä»¶è·¯ç”±ï¼Œå°±æ˜¯ä¸éœ€è¦æ‰‹å†™é…ç½®ï¼Œæ–‡ä»¶ç³»ç»Ÿå³è·¯ç”±ï¼Œé€šè¿‡src/pagesç›®å½•å’Œæ–‡ä»¶åŠå…¶å‘½ååˆ†æå‡ºè·¯ç”±é…ç½®, ä¹Ÿå°±æ˜¯è®©umiæ ¹æ®çº¦å®šå¥½çš„ç›®å½•ç»“æ„å¸®æˆ‘ä»¬ç”Ÿæˆè·¯ç”±é…ç½®æ–‡ä»¶ã€‚
> - æ¯”å¦‚ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š

----

  â”œâ”€â”€ pages
    â”œâ”€â”€ 404.tsx
    â”œâ”€â”€ center.tsx
    â”œâ”€â”€ cinema.tsx
    â”œâ”€â”€ city.tsx
    â”œâ”€â”€ detail
    â”‚Â Â  â””â”€â”€ [id].tsx
    â”œâ”€â”€ film
    â”‚Â Â  â”œâ”€â”€ _layout.tsx
    â”‚Â Â  â”œâ”€â”€ comingsoon.tsx
    â”‚Â Â  â””â”€â”€ nowplaying.tsx
    â”œâ”€â”€ index.tsx
    â””â”€â”€ login.tsx

----

> - ä¼šå¾—åˆ°ä»¥ä¸‹è·¯ç”±é…ç½®

----
  [
    { exact: true, path: '/', component: '@/pages/index' },
    { exact: true, path: '/login', component: '@/pages/login' },
    { exact: true, path: '/city', component: '@/pages/city' }
    ...
  ]
----

> - éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ»¡è¶³ä»¥ä¸‹ä»»æ„è§„åˆ™çš„æ–‡ä»¶ä¸ä¼šè¢«æ³¨å†Œä¸ºè·¯ç”±
> * ä»¥.æˆ–_å¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•
> * ä»¥d.tsç»“å°¾çš„ç±»å‹å®šä¹‰æ–‡ä»¶
> * ä»¥test.tsã€spec.tsã€e2e.tsç»“å°¾çš„æµ‹è¯•æ–‡ä»¶ï¼ˆé€‚ç”¨äº.jsã€.jsxå’Œ.tsxæ–‡ä»¶ï¼‰
> * componentså’Œcomponentç›®å½•
> * utilså’Œutilç›®å½•
> * ä¸æ˜¯.jsã€.jsxã€.tsæˆ–.tsxæ–‡ä»¶
> * æ–‡ä»¶å†…å®¹ä¸åŒ…å« JSX å…ƒç´ 

> - (1) åŸºç¡€è·¯ç”±

image::https://github.com/god1097/picture/blob/main/umi/%E5%9F%BA%E7%A1%80%E8%B7%AF%E7%94%B1.png[åŸºç¡€è·¯ç”±]

> - (2) é‡å®šå‘

```tsx
  //pages/index.tsx
  import { Redirect } from 'umi';
  const Index = () => {
    return <Redirect to="/film" />;
  };
  export default Index;
  // åœ¨film/_layout.tsx
  import { Redirect, useLocation } from 'umi';
  const film = (props: any) => {
    const location = useLocation();
    if (location.pathname === '/film' || location.pathname === '/film/') {
      return <Redirect to="/film/nowplaying" />;
    }
    return (
      <div>
        <div style={{ height: '200px', background: 'skyblue' }}>è½®æ’­å›¾</div>
        {props.children}
      </div>
    );
  };
  export default film;
```

> - (3) åµŒå¥—è·¯ç”±

image::https://github.com/god1097/picture/blob/main/umi/%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1.png[åµŒå¥—è·¯ç”±]

> - (4) åŠ¨æ€è·¯ç”±

image::https://github.com/god1097/picture/blob/main/umi/%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1.png[åŠ¨æ€è·¯ç”±]

> - (5) è·¯ç”±æ‹¦æˆª

```tsx
  //pages/center.tsx
  import { useHistory } from 'umi';
  const center = () => {
    const history = useHistory();
    return (
      <div>
        center
        <button
          onClick={() => {
            localStorage.removeItem('token');
            history.push('/login');
          }}
        >
          UNLOGIN
        </button>
      </div>
    );
  };
  center.wrappers = ['@/wrappers/Auth'];
  export default center;
  //wrappers/Auth.tsx
  import { Redirect } from 'umi';
  const Auth = (props: any) => {
    if (localStorage.getItem('token')) {
      return <div>{props.children}</div>;
    }
    return <Redirect to="/login" />;
  };
  export default Auth;
```

> - (6) Hashæ¨¡å¼

```tsx
  // åœ¨.umirc.js
  export default {
    history:{ type: 'hash' }
  }
```

> - (7) å£°æ˜å¼å¯¼èˆª

image::https://github.com/god1097/picture/blob/main/umi/%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA.png[å£°æ˜å¼å¯¼èˆª]


```tsx
  //layouts/index.tsx
  import {  NavLink } from 'umi';
  import './index.less';
  const IndexLayout = (props: any) => {
    if (
      props.location.pathname === '/city' ||
      props.location.pathname.includes('/detail')
    ) {
      return <div>{props.children}</div>;
    }
    return (
      <div>
        {props.children}
        <ul>
          <li>
            <NavLink to="/film" activeClassName="active">
              film
            </NavLink>
          </li>
          <li>
            <NavLink to="/cinema" activeClassName="active">
              cinema
            </NavLink>
          </li>
          <li>
            <NavLink to="/center" activeClassName="active">
              center
            </NavLink>
          </li>
        </ul>
      </div>
    );
  };
  export default IndexLayout;
```

> - (8) ç¼–ç¨‹å¼å¯¼èˆª

```tsx
  import { history } from 'umi';
  history.push(`/detail/${item}`)
```

---

=== mockåŠŸèƒ½

> - umié‡Œçº¦å®šmockæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æˆ–è€…page(s)æ–‡ä»¶å¤¹ä¸‹çš„_mockæ–‡ä»¶å³mockæ–‡ä»¶ï¼Œã€
> - æ–‡ä»¶å¯¼å‡ºæ¥å£å®šä¹‰ï¼Œæ”¯æŒåŸºäºrequireåŠ¨æ€åˆ†æçš„å®æ—¶åˆ·æ–°ï¼Œæ”¯æŒES6è¯­æ³•ï¼Œä»¥åŠå‹å¥½çš„å‡ºé”™æç¤º

```jsx
  // mock/api.js
  export default {
    'GET /users': { name: 'xiaoming', age: 20 },
    'POST /users/login': (req, res) => {
      if (req.body.name === 'xiaoming' && req.body.password === '123') {
        res.send({ ok: 1 });
      } else {
        res.send({ ok: 0 });
      }
    },
  };
```

---

=== åå‘ä»£ç†

```jsx
  // åœ¨.umirc.js
  proxy: {
    '/api': {
      target: 'https://i.maoyan.com/',
      changeOrigin: true
    }
  }
```

---

=== antd


```jsx
  // .umirc.ts
  antd:{ 
    //è‡ªå®šä¹‰é…ç½®
  }
  //ç»„ä»¶é¡µé¢ä¸­ä½¿ç”¨
  import {Button} from 'antd-mobile' 
  <Button type="primary">add</Button>
```

---


=== dvaé›†æˆ


> - æŒ‰ç›®å½•çº¦å®šæ³¨å†Œ modelï¼Œæ— éœ€æ‰‹åŠ¨ app.model
> - æ–‡ä»¶åå³ namespaceï¼Œå¯ä»¥çœå» model å¯¼å‡ºçš„ namespace key
> - æ— éœ€æ‰‹å†™ router.jsï¼Œäº¤ç»™ umi å¤„ç†ï¼Œæ”¯æŒ model å’Œ component çš„æŒ‰éœ€åŠ è½½
> - å†…ç½® query-string å¤„ç†ï¼Œæ— éœ€å†æ‰‹åŠ¨è§£ç å’Œç¼–ç 
> - å†…ç½® dva-loading å’Œ dva-immerï¼Œå…¶ä¸­ dva-immeréœ€é€šè¿‡é…ç½®å¼€å¯(ç®€åŒ– reducer ç¼–å†™)


```jsx
// .umirc.ts
dva: {
  //Immer æ˜¯ mobx çš„ä½œè€…å†™çš„ä¸€ä¸ª immutable åº“ï¼Œæ ¸å¿ƒå®ç°æ˜¯åˆ©ç”¨ ES6 çš„ proxy
  //å‡ ä¹ä»¥æœ€å°çš„æˆæœ¬å®ç°äº† js çš„ä¸å¯å˜æ•°æ®ç»“æ„ï¼Œç®€å•æ˜“ç”¨ã€ä½“é‡å°å·§ã€è®¾è®¡å·§å¦™ï¼Œæ»¡è¶³äº†æˆ‘ä»¬å¯¹JSä¸å¯å˜æ•°æ®ç»“æ„çš„éœ€æ±‚ã€‚
  immer: true,
  hmr: false
}
```




---







